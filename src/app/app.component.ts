import { Component, OnInit } from '@angular/core';
import * as echarts from 'echarts/lib/echarts';

// -- force layout --

import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';
import { map } from 'rxjs/operators';
import { EChartOption } from 'echarts';
import { parse } from 'echarts/extension/dataTool/gexf';
import { AppService } from './app.service';
// ---- end

declare const require: any;

// var base = +new Date(1968, 9, 3);
// var oneDay = 24 * 3600 * 1000;
var date = [];
var bits = [];
var data = [Math.random() * 30];

// for (var i = 1; i < 20000; i++) {
//   var now = new Date((base += oneDay));
//   date.push([now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/'));
//   data.push(Math.round((Math.random() - 0.5) * 20 + data[i - 1]));
// }

new echarts.graphic.LinearGradient(/** ... */);
@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss'],
})
export class AppComponent implements OnInit {
  // options: Observable<EChartOption>;
  graphData = [];
  constructor(private http: HttpClient, public appService: AppService) {}
  keys = [];
  values = [];
  colors = [];
  ngOnInit() {
    this.graphData = this.appService.getGraphData();
    console.log('graphData' + this.graphData);

    for (var i = 0; i <= this.graphData.length; i++) {
      for (var j = 0; j <= this.graphData[i].values.length; j++) {
        this.keys.push(this.graphData[i].key);
        date.push(
          new Date(parseInt(this.graphData[i].values[j][0])).toLocaleString()
        );
        bits.push(this.graphData[i].values[j][1] * 0.000001);
      }
    }
    var utcSeconds = 83354928;
    var d = new Date(0); // The 0 there is the key, which sets the date to the epoch
  }

     

  option = {
    title: {
      text: 'Stacked area chart',
    },
    tooltip: {
      trigger: 'axis',
      axisPointer: {
        type: 'cross',
        label: {
          backgroundColor: '#6a7985',
        },
      },
    },
    legend: {
      data: [
        '1Monday',
        '2Tuesday',
        '3Wednesday',
        '4Thursday',
        '5Friday',
        '6Saturday',
        '7Sunday',
        '1Monday',
        '2Tuesday',
        '3Wednesday',
        '4Thursday',
        '5Friday',
        '6Saturday',
        '7Sunday',
        '1Monday',
        '2Tuesday',
        '3Wednesday',
        '4Thursday',
        '5Friday',
        '6Saturday',
        '7Sunday',
        '1Monday',
        '2Tuesday',
        '3Wednesday',
        '4Thursday',
        '5Friday',
        '6Saturday',
        '7Sunday',
        '1Monday',
        '2Tuesday',
        '3Wednesday',
        '4Thursday',
        '5Friday',
        '6Saturday',
        '7Sunday',
        '1Monday',
        '2Tuesday',
        '3Wednesday',
        '4Thursday',
        '5Friday',
        '6Saturday',
        '7Sunday',
        '1Monday',
        '2Tuesday',
        '3Wednesday',
        '4Thursday',
        '5Friday',
        '6Saturday',
        '7Sunday',
        '1Monday',
        '2Tuesday',
        '3Wednesday',
        '4Thursday',
        '5Friday',
        '6Saturday',
        '7Sunday',
      ],
    },
    toolbox: {
      feature: {
        saveAsImage: {},
      },
    },
    grid: {
      left: '3%',
      right: '4%',
      bottom: '3%',
      containLabel: true,
    },
    xAxis: [
      {
        type: 'category',
        boundaryGap: false,
        // data: date,
        data: [
          '1Monday',
          '2Tuesday',
          '3Wednesday',
          '4Thursday',
          '5Friday',
          '6Saturday',
          '7Sunday',
          '1Monday',
          '2Tuesday',
          '3Wednesday',
          '4Thursday',
          '5Friday',
          '6Saturday',
          '7Sunday',
          '1Monday',
          '2Tuesday',
          '3Wednesday',
          '4Thursday',
          '5Friday',
          '6Saturday',
          '7Sunday',
          '1Monday',
          '2Tuesday',
          '3Wednesday',
          '4Thursday',
          '5Friday',
          '6Saturday',
          '7Sunday',
          '1Monday',
          '2Tuesday',
          '3Wednesday',
          '4Thursday',
          '5Friday',
          '6Saturday',
          '7Sunday',
          '1Monday',
          '2Tuesday',
          '3Wednesday',
          '4Thursday',
          '5Friday',
          '6Saturday',
          '7Sunday',
          '1Monday',
          '2Tuesday',
          '3Wednesday',
          '4Thursday',
          '5Friday',
          '6Saturday',
          '7Sunday',
          '1Monday',
          '2Tuesday',
          '3Wednesday',
          '4Thursday',
          '5Friday',
          '6Saturday',
          '7Sunday',
        ],
      },
    ],
    yAxis: [
      {
        type: 'value',
      },
    ],
    series: [
      {
        name: 'Email marketing',
        type: 'line',
        // stack: 'Total',
        areaStyle: {},
        data: [
          120,
          132,
          101,
          134,
          900,
          1100,
          1000,
          120,
          132,
          101,
          134,
          900,
          1100,
          1000,
          120,
          132,
          101,
          134,
          900,
          1100,
          1000,
          120,
          132,
          101,
          134,
          900,
          1100,
          1000,
          120,
          132,
          101,
          134,
          900,
          1100,
          1000,
          120,
          132,
          101,
          134,
          900,
          1100,
          1000,
          120,
          132,
          101,
          134,
          900,
          1100,
          1000,
          120,
          132,
          101,
          134,
          900,
          1100,
          1000,
        ],
      },
      {
        name: 'Affiliate ads',
        type: 'line',
        // stack: 'Total',
        areaStyle: {},
        data: [
          220,
          182,
          191,
          234,
          290,
          330,
          310,
          220,
          182,
          191,
          234,
          290,
          330,
          310,
          220,
          182,
          191,
          234,
          290,
          330,
          310,
          220,
          182,
          191,
          234,
          290,
          330,
          310,
          220,
          182,
          191,
          234,
          290,
          330,
          310,
          220,
          182,
          191,
          234,
          290,
          330,
          310,
          220,
          182,
          191,
          234,
          290,
          330,
          310,
          220,
          182,
          191,
          234,
          290,
          330,
          310,
        ],
      },
      {
        name: 'Video ad',
        type: 'line',
        // stack: 'Total',
        areaStyle: {},
        data: [
          150,
          232,
          201,
          154,
          190,
          330,
          410,
          150,
          232,
          201,
          154,
          190,
          330,
          410,
          150,
          232,
          201,
          154,
          190,
          330,
          410,
          150,
          232,
          201,
          154,
          190,
          330,
          410,
          150,
          232,
          201,
          154,
          190,
          330,
          410,
          150,
          232,
          201,
          154,
          190,
          330,
          410,
          150,
          232,
          201,
          154,
          190,
          330,
          410,
          150,
          232,
          201,
          154,
          190,
          330,
          410,
        ],
      },
      {
        name: 'direct interview',
        type: 'line',
        // stack: 'Total',
        areaStyle: {},
        data: [
          320,
          332,
          301,
          334,
          390,
          330,
          320,
          320,
          332,
          301,
          334,
          390,
          330,
          320,
          320,
          332,
          301,
          334,
          390,
          330,
          320,
          320,
          332,
          301,
          334,
          390,
          330,
          320,
          320,
          332,
          301,
          334,
          390,
          330,
          320,
          320,
          332,
          301,
          334,
          390,
          330,
          320,
          320,
          332,
          301,
          334,
          390,
          330,
          320,
          320,
          332,
          301,
          334,
          390,
          330,
          320,
        ],
      },
      {
        name: 'search engine',
        type: 'line',
        // stack: 'Total',
        label: {
          normal: {
            show: true,
            position: 'top',
          },
        },
        areaStyle: {},
        data: [
          820,
          932,
          901,
          934,
          1290,
          1330,
          1320,
          820,
          932,
          901,
          934,
          1290,
          1330,
          1320,
          820,
          932,
          901,
          934,
          1290,
          1330,
          1320,
          820,
          932,
          901,
          934,
          1290,
          1330,
          1320,
          820,
          932,
          901,
          934,
          1290,
          1330,
          1320,
          820,
          932,
          901,
          934,
          1290,
          1330,
          1320,
          820,
          932,
          901,
          934,
          1290,
          1330,
          1320,
          820,
          932,
          901,
          934,
          1290,
          1330,
          1320,
        ],
      },
    ],
  };
}
